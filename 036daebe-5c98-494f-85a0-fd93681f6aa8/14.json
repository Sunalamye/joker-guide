{
  "id": "14",
  "subject": "新增 VecNormalize 獎勵正規化包裝器",
  "description": "**What**: 在 SubprocVecEnv 外層包裝 VecNormalize 進行獎勵正規化\n\n**Where**: `python-env/src/joker_env/train_sb3.py` lines 14, 268-271\n\n**How**: \n1. 添加 import（line 14 附近）：\n```python\nfrom stable_baselines3.common.vec_env import SubprocVecEnv, VecNormalize\n```\n\n2. 在 SubprocVecEnv 創建後包裝（lines 268-271 之後）：\n```python\nif n_envs > 1:\n    env = SubprocVecEnv([...])\n    # 新增 VecNormalize 包裝\n    env = VecNormalize(\n        env,\n        norm_obs=False,      # Dict obs 不正規化\n        norm_reward=True,    # 正規化獎勵\n        clip_reward=10.0,\n        gamma=gamma,         # 使用訓練的 gamma\n        training=True,\n    )\n```\n\n**Why**: 獎勵範圍 -2.0 到 +5.0 會導致梯度不穩定，VecNormalize 可以標準化獎勵分佈。\n\n**Verify**: 執行訓練腳本，確認輸出包含 VecNormalize 相關日誌且無報錯",
  "activeForm": "新增 VecNormalize 獎勵正規化",
  "status": "pending",
  "blocks": [
    "17"
  ],
  "blockedBy": []
}